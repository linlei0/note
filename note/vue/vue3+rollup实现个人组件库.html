<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“ | linlei space</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="æˆåŠŸåªä¼šæ·˜æ±°æ‡’æƒ°çš„äººï¼Œå¹³åº¸ä¹Ÿéœ€è¦åŠªåŠ›ï¼">
    
    <link rel="preload" href="/note/assets/css/0.styles.19e75038.css" as="style"><link rel="preload" href="/note/assets/js/app.39547da1.js" as="script"><link rel="preload" href="/note/assets/js/2.c3539c26.js" as="script"><link rel="preload" href="/note/assets/js/37.10ec91da.js" as="script"><link rel="prefetch" href="/note/assets/js/10.72f7ab31.js"><link rel="prefetch" href="/note/assets/js/11.311b3a53.js"><link rel="prefetch" href="/note/assets/js/12.883d287d.js"><link rel="prefetch" href="/note/assets/js/13.acba9f06.js"><link rel="prefetch" href="/note/assets/js/14.0128a1d9.js"><link rel="prefetch" href="/note/assets/js/15.e678443c.js"><link rel="prefetch" href="/note/assets/js/16.43bdf88c.js"><link rel="prefetch" href="/note/assets/js/17.f1a34547.js"><link rel="prefetch" href="/note/assets/js/18.75b7d991.js"><link rel="prefetch" href="/note/assets/js/19.4f280339.js"><link rel="prefetch" href="/note/assets/js/20.a0ae2bf4.js"><link rel="prefetch" href="/note/assets/js/21.261ca275.js"><link rel="prefetch" href="/note/assets/js/22.6f94bc3d.js"><link rel="prefetch" href="/note/assets/js/23.890c5482.js"><link rel="prefetch" href="/note/assets/js/24.c0983c03.js"><link rel="prefetch" href="/note/assets/js/25.faf68a72.js"><link rel="prefetch" href="/note/assets/js/26.bb155049.js"><link rel="prefetch" href="/note/assets/js/27.6d25092c.js"><link rel="prefetch" href="/note/assets/js/28.e48d335b.js"><link rel="prefetch" href="/note/assets/js/29.a21ca56e.js"><link rel="prefetch" href="/note/assets/js/3.69b4f426.js"><link rel="prefetch" href="/note/assets/js/30.6253c62f.js"><link rel="prefetch" href="/note/assets/js/31.47f4584a.js"><link rel="prefetch" href="/note/assets/js/32.833e7bbc.js"><link rel="prefetch" href="/note/assets/js/33.e5662ad1.js"><link rel="prefetch" href="/note/assets/js/34.62de4fd2.js"><link rel="prefetch" href="/note/assets/js/35.87dcf37a.js"><link rel="prefetch" href="/note/assets/js/36.80da8758.js"><link rel="prefetch" href="/note/assets/js/38.aad21191.js"><link rel="prefetch" href="/note/assets/js/39.8e17e2d0.js"><link rel="prefetch" href="/note/assets/js/4.6a2698d4.js"><link rel="prefetch" href="/note/assets/js/40.c91527d7.js"><link rel="prefetch" href="/note/assets/js/41.96f6f4d5.js"><link rel="prefetch" href="/note/assets/js/42.a5bf8bbd.js"><link rel="prefetch" href="/note/assets/js/43.d718700b.js"><link rel="prefetch" href="/note/assets/js/44.64edf3f2.js"><link rel="prefetch" href="/note/assets/js/45.5f2dda9f.js"><link rel="prefetch" href="/note/assets/js/46.8efc4388.js"><link rel="prefetch" href="/note/assets/js/47.e4fe66f7.js"><link rel="prefetch" href="/note/assets/js/48.2d4c3adb.js"><link rel="prefetch" href="/note/assets/js/49.e861c0f0.js"><link rel="prefetch" href="/note/assets/js/5.01060300.js"><link rel="prefetch" href="/note/assets/js/50.8e5126bc.js"><link rel="prefetch" href="/note/assets/js/6.e9af0303.js"><link rel="prefetch" href="/note/assets/js/7.9cdbc468.js"><link rel="prefetch" href="/note/assets/js/8.b1eb73f5.js"><link rel="prefetch" href="/note/assets/js/9.46d0ff61.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.19e75038.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">linlei space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  åšå®¢
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><span class="title">ç®—æ³•</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç®—æ³•" class="mobile-dropdown-title"><span class="title">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  æ¯æ—¥
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  åšå®¢
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><span class="title">ç®—æ³•</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç®—æ³•" class="mobile-dropdown-title"><span class="title">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  æ¯æ—¥
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html&amp;æµè§ˆå™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€§èƒ½</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/note/vue/æºç .html" class="sidebar-link">vue2æºç </a></li><li><a href="/note/note/vue/$setåŸç†.html" class="sidebar-link">Vue.\$set åŸç†</a></li><li><a href="/note/note/vue/nuxt.html" class="sidebar-link">nuxt åŸºç¡€ä½¿ç”¨</a></li><li><a href="/note/note/vue/vue2åŸºç¡€.html" class="sidebar-link">vue2 åŸºç¡€</a></li><li><a href="/note/note/vue/vue2è¿›é˜¶.html" class="sidebar-link">vue2 è¿›é˜¶</a></li><li><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html" class="active sidebar-link">vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#rollupæ˜¯åšä»€ä¹ˆçš„" class="sidebar-link">rollupæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#å®‰è£…rollup" class="sidebar-link">å®‰è£…rollup</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#å®ç°ä¸€ä¸ªç®€å•çš„hello-world" class="sidebar-link">å®ç°ä¸€ä¸ªç®€å•çš„hello world</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#webpackå’Œrollup" class="sidebar-link">webpackå’Œrollup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#webpack" class="sidebar-link">webpack</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#rollup" class="sidebar-link">rollup</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#webpack-vs-rollup" class="sidebar-link">webpack VS rollup</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#rolluopé…ç½®" class="sidebar-link">rolluopé…ç½®</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#vue3æ’ä»¶ç³»ç»Ÿå¼€å‘" class="sidebar-link">vue3æ’ä»¶ç³»ç»Ÿå¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#å¼€å‘ä¸€ä¸ªæ’ä»¶" class="sidebar-link">å¼€å‘ä¸€ä¸ªæ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡" class="sidebar-link">ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#æ·»åŠ tollupé…ç½®å¹¶æ‰“åŒ…" class="sidebar-link">æ·»åŠ tollupé…ç½®å¹¶æ‰“åŒ…</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#å‘å¸ƒç»„ä»¶" class="sidebar-link">å‘å¸ƒç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.html#å†™åœ¨æœ€å" class="sidebar-link">å†™åœ¨æœ€å</a></li></ul></li></ul></li><li><a href="/note/note/vue/vue3å®ç°ä¸€ä¸ªtoastç»„ä»¶.html" class="sidebar-link">vue3å®ç°toast</a></li><li><a href="/note/note/vue/vue3å®ç°uploadç»„ä»¶.html" class="sidebar-link">vue3å®ç°uploadç»„ä»¶</a></li><li><a href="/note/note/vue/vue2å’Œvue3åŒºåˆ«.html" class="sidebar-link">vue2 å’Œ vue3</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3-rollupå®ç°ä¸ªäººç»„ä»¶åº“"><a href="#vue3-rollupå®ç°ä¸ªäººç»„ä»¶åº“" class="header-anchor">#</a> vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“</h1> <p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“rollupæ˜¯å¹²å˜›çš„</p> <h2 id="rollupæ˜¯åšä»€ä¹ˆçš„"><a href="#rollupæ˜¯åšä»€ä¹ˆçš„" class="header-anchor">#</a> rollupæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h2> <p>rollupæ˜¯ä¸€ä¸ªJavaScriptæ‰“åŒ…æ¨¡å—å™¨ï¼Œå¯ä»¥å°†å°ä»£ç ç¼–è¯‘æˆå¤§å—å¤æ‚çš„ä»£ç ï¼Œä¾‹å¦‚ library æˆ–åº”ç”¨ç¨‹åºã€‚
Rollup å¯¹ä»£ç æ¨¡å—ä½¿ç”¨æ–°çš„æ ‡å‡†åŒ–æ ¼å¼ï¼Œè¿™äº›æ ‡å‡†éƒ½åŒ…å«åœ¨ JavaScript çš„ ES6 ç‰ˆæœ¬ä¸­ï¼Œè€Œä¸æ˜¯ä»¥å‰çš„ç‰¹æ®Šè§£å†³æ–¹æ¡ˆï¼Œå¦‚ CommonJS å’Œ AMDã€‚ES6 æ¨¡å—å¯ä»¥ä½¿ä½ è‡ªç”±ã€æ— ç¼åœ°ä½¿ç”¨ä½ æœ€å–œçˆ±çš„ library ä¸­é‚£äº›æœ€æœ‰ç”¨ç‹¬ç«‹å‡½æ•°ï¼Œè€Œä½ çš„é¡¹ç›®ä¸å¿…æºå¸¦å…¶ä»–æœªä½¿ç”¨çš„ä»£ç ã€‚ES6 æ¨¡å—æœ€ç»ˆè¿˜æ˜¯è¦ç”±æµè§ˆå™¨åŸç”Ÿå®ç°ï¼Œä½†å½“å‰ Rollup å¯ä»¥ä½¿ä½ æå‰ä½“éªŒã€‚ <br></p> <p>å‚è€ƒæ–‡æ¡£ï¼š <br> <a href="https://www.rollupjs.com/guide/tutorial" target="_blank" rel="noopener noreferrer">rollupä¸­æ–‡æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br> <a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">rollupæ’ä»¶é›†åˆ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="å®‰è£…rollup"><a href="#å®‰è£…rollup" class="header-anchor">#</a> å®‰è£…rollup</h2> <ol><li>é¦–é€‰å®‰è£…<code>node.js</code></li> <li>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå…¨å±€å®‰è£…</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install rollup <span class="token operator">--</span>global <span class="token comment">// or npm i rollup -g</span>
</code></pre></div><ol start="3"><li>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸåªéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥ï¼šrollup</li></ol> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f7a57a9b0004f28bdead6bc082ba3e4~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
å¦‚ä¸Šåˆ™è¡¨æ˜å…¨å±€çš„<code>rollup</code>å®‰è£…æˆåŠŸ</p> <h2 id="å®ç°ä¸€ä¸ªç®€å•çš„hello-world"><a href="#å®ç°ä¸€ä¸ªç®€å•çš„hello-world" class="header-anchor">#</a> å®ç°ä¸€ä¸ªç®€å•çš„hello world</h2> <ol><li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>index.js</code>,<code>hello.js</code>
hello.jsä»£ç å¦‚ä¸‹ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hello'</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'world'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>index.jsä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>hello<span class="token punctuation">,</span> world<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./hello.js'</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>ç¼–è¯‘ï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npx rollup index<span class="token punctuation">.</span>js <span class="token operator">--</span>file dist<span class="token operator">/</span>bundle<span class="token punctuation">.</span>js <span class="token operator">--</span>format iife
</code></pre></div><p>æˆ‘ä»¬å‘ç°æ‰“åŒ…äº†ä¸€ä¸ªdistæ–‡ä»¶å¤¹å¦‚ä¸‹ï¼š</p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47bdcc23c7b2433e83123931c5b18469~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ‰“åŒ…çš„å†…å®¹ï¼š</p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c5bd363b02c42c1a47a11d13c6e8402~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¼šå¾ˆç–‘æƒ‘äº†ï¼Œè¯´å¥½çš„helloï¼Œworldå‘¢ï¼Ÿå…¶å®è¿™ä¸ªæ˜¯å› ä¸ºtree-shakingçš„ä½œç”¨ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å’Œwebpackç±»ä¼¼äº†ã€‚é‚£æˆ‘ä»¬åœ¨åšä¸€ä¸‹å˜å½¢ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>hello<span class="token punctuation">,</span> world<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./hello.js'</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">world</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result
</code></pre></div><p>ç„¶ååœ¨æ‰“åŒ…çœ‹çœ‹è¾“å‡ºçš„ä»£ç </p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b287560cac9841f68f2cec46d7d3a838~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
è¿™ä¸ªæ—¶å€™å°±æœ‰äº†helloï¼Œworldäº†ï¼Œå¯¹æ¯”å‘ç°rollupæ‰“åŒ…åçš„ä»£ç æ¯”webpackæ›´åŠ çš„æ¸…æ™°ï¼Œè¿™ä¸ªæˆ‘ä»¬æ¥ä¸‹æ¥æ¢è®¨webpackå’Œrollupçš„åŒºåˆ«ã€‚</p> <h2 id="webpackå’Œrollup"><a href="#webpackå’Œrollup" class="header-anchor">#</a> webpackå’Œrollup</h2> <h3 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h3> <p><strong>å¤§å‹SPAé¡¹ç›®çš„æ„å»º</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„webåº”ç”¨ã€‚</p> <ul><li>é€šè¿‡å„ç§Loaderå¤„ç†å„ç§å„æ ·çš„èµ„æºæ–‡ä»¶</li> <li>é€šè¿‡å„ç§æ’ä»¶Pluginså¯¹æ•´ä½“æ–‡ä»¶è¿›è¡Œä¸€äº›å¤„ç†</li> <li>code splitingå¯¹å…¬å…±æ¨¡å—è¿›è¡Œæå–</li> <li>æä¾›ä¸€ä¸ªwebpack-dev-serverå¯¹æœ¬åœ°è¿›è¡Œå¼€å‘</li> <li>æ”¯æŒHMRæ¨¡å—è¿›è¡Œçƒ­æ›¿æ¢</li></ul> <h3 id="rollup"><a href="#rollup" class="header-anchor">#</a> rollup</h3> <ul><li>rollupè®¾è®¡ä¹‹åˆå°±æ˜¯é¢å‘ES moduleçš„æ„å»ºå‡ºç»“æ„æ‰å¹³ï¼Œæ€§èƒ½å‡ºä¼—çš„ç±»åº“</li> <li>ç›®çš„æ˜¯å°†ES moduleæ‰“åŒ…ç”Ÿæˆç‰¹å®šçš„JSæ¨¡å—æ–‡ä»¶ï¼Œå¹¶å‡å°‘å®ƒçš„ä½“ç§¯</li> <li>ç¼–è¯‘å‡ºæ¥çš„ä»£ç å¯è¯»æ€§æ›´å¥½ï¼Œå†…å®¹å°ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜</li> <li>é…ç½®æ›´åŠ ç®€å•</li></ul> <p><strong>é¡ºå¸¦è¯´ä¸€ä¸‹ES moduleè§„åˆ™</strong></p> <ul><li>importè¯­å¥åªèƒ½ä½œä¸ºæ¨¡å—çš„é¡¶å±‚å‡ºç°ï¼Œä¸èƒ½å‡ºç°åœ¨function ifé‡Œé¢è¿™ç‚¹å’ŒcommonJSä¸ä¸€æ ·</li> <li>ES moduleçš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡</li> <li>ä¸ç®¡importçš„è¯­å¥ä½ç½®å‡ºç°åœ¨å“ªï¼Œåœ¨æ¨¡å—åˆå§‹åŒ–çš„æ—¶å€™æ‰€æœ‰çš„importéƒ½å¿…é¡»æ˜¯å¯¼å…¥å®Œæˆçš„</li></ul> <h3 id="webpack-vs-rollup"><a href="#webpack-vs-rollup" class="header-anchor">#</a> webpack VS rollup</h3> <p>é€šè¿‡ä»¥ä¸Šæˆ‘ä»¬å¯ä»¥çŸ¥é“æ„å»ºAppåº”ç”¨æ—¶é€‰ç”¨webpacké€‚åˆï¼Œæ„å»ºç±»åº“rollupæ›´åŠ é€‚åˆã€‚</p> <p>æ¥ä¸‹æ¥å¼€å§‹å°è¯•é…ç½®rolluopå§</p> <h2 id="rolluopé…ç½®"><a href="#rolluopé…ç½®" class="header-anchor">#</a> rolluopé…ç½®</h2> <ol><li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>rolluplearn</code>ç›®å½•ä¸‹æ‰§è¡Œ<code>npm init -y</code></li> <li>å®‰è£…rollup</li> <li>åˆ›å»ºå¦‚ä¸‹ç›®å½•ç»“æ„ï¼Œå¹¶æ–°å»ºæ–‡ä»¶<code>rollup.config.js</code></li></ol> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8766aed88ea64697857921f4b7a985f1~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
3. ç¼–å†™rollupé…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¯»å–jsonæ–‡ä»¶</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">'@rollup/plugin-json'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    input<span class="token operator">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    input<span class="token operator">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span> <span class="token comment">// å…¥å£æ–‡ä»¶</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>        
        file<span class="token operator">:</span> <span class="token string">'dist/bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">//æ‰“åŒ…æ–‡ä»¶åœ°å€</span>
        format<span class="token operator">:</span> <span class="token string">'esm'</span><span class="token punctuation">,</span>          <span class="token comment">// æ‰“åŒ…æ ¼å¼ä¸ºesmodule</span>
    <span class="token punctuation">}</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>åœ¨<code>package.json</code>ä¸­ç¼–è¾‘æ‰“åŒ…è„šæœ¬ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config rollup.config.js&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>å¼€å§‹ç¼–å†™main.jå’Œsrc/test.jsæ–‡ä»¶
src/test.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hell</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hell'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
    hell<span class="token punctuation">,</span>
    fn 
<span class="token punctuation">}</span>
</code></pre></div><p>main.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fn<span class="token punctuation">,</span> hell <span class="token punctuation">}</span><span class="token keyword">from</span> <span class="token string">'./src/test'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> version <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./package.json'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>version<span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="6"><li>æ‰§è¡Œ <code>npm run build</code>ï¼Œç»“æœå¦‚ä¸‹ï¼š</li></ol> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f492b5a569d2471c8e9a2f0172889ac4~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
rollupç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰weebpackçš„é…ç½®é‚£ä¹ˆå¤æ‚ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸‹vue3çš„æ’ä»¶å¼€å‘ã€‚</p> <h2 id="vue3æ’ä»¶ç³»ç»Ÿå¼€å‘"><a href="#vue3æ’ä»¶ç³»ç»Ÿå¼€å‘" class="header-anchor">#</a> vue3æ’ä»¶ç³»ç»Ÿå¼€å‘</h2> <p>ç»™vue3åº”ç”¨æ·»åŠ å…¨å±€åŠŸèƒ½ï¼Œä¸€èˆ¬æ˜¯Objectæœ‰ä¸€ä¸ª<code>install</code>æ–¹æ³•æˆ–è€…æ˜¯ç›´æ¥ä½¿ç”¨<code>function</code>ï¼Œå®ƒä»¬æ²¡æœ‰ä¸¥æ ¼çš„é™åˆ¶ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p> <ul><li>æ·»åŠ å…¨å±€æ–¹æ³•å’Œå±æ€§</li> <li>æ·»åŠ å…¨å±€èµ„æºå’ŒæŒ‡ä»¤</li> <li>é€šè¿‡å…¨å±€æ··å…¥æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹</li> <li>é€šè¿‡config.globalPropertiesæ¥æ·»åŠ appçš„å®ä¾‹æ–¹æ³•</li></ul> <h3 id="å¼€å‘ä¸€ä¸ªæ’ä»¶"><a href="#å¼€å‘ä¸€ä¸ªæ’ä»¶" class="header-anchor">#</a> å¼€å‘ä¸€ä¸ªæ’ä»¶</h3> <h4 id="å…¨å±€æ–¹æ³•"><a href="#å…¨å±€æ–¹æ³•" class="header-anchor">#</a> å…¨å±€æ–¹æ³•</h4> <p>ä½¿ç”¨vue-cliåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨<code>components</code>ä¸‹åˆ›å»º<code>test.plugin.ts</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>App<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token operator">:</span> App</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span><span class="token function-variable function">$echo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'echo plugin'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> plugins

</code></pre></div><p>æ¥ä¸‹æ¥åœ¨<code>main.ts</code>ä¸­ä½¿ç”¨è¿›è¡Œå…¨å±€ä½¿ç”¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> testPlugin <span class="token keyword">from</span> <span class="token string">'./components/test.plugin'</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>testPlugin<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>æ­¤æ—¶æˆ‘ä»¬å°±æ³¨å†ŒæˆåŠŸäº†ä¸€ä¸ªå…¨å±€æ–¹æ³•<code>$echo</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è°ƒç”¨è¯•è¯•çœ‹èƒ½å¦æˆåŠŸï¼Œ
åœ¨<code>App.vue</code>å†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// getCurrentInstance è¿”å›å½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡</span>
    <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span>appContext<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span><span class="token function">$echo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0af48da1d7c64b90980f26cfd09c407d~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
è¯´æ˜æˆ‘ä»¬çš„å…¨å±€æ–¹æ³•å·²ç»æ·»åŠ æˆåŠŸï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ·»åŠ å…¨å±€ç»„ä»¶ã€‚</p> <h4 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="header-anchor">#</a> å…¨å±€ç»„ä»¶</h4> <p>è¿˜æ˜¯åœ¨<code>mian.ts</code>ä¸­è¿›è¡Œä¸€äº›ä¿®æ”¹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>App<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token operator">:</span> App</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span><span class="token function-variable function">$echo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'echo plugin'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>HelloWord<span class="token punctuation">.</span>name<span class="token punctuation">,</span> HelloWord<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> plugins
</code></pre></div><p>åœ¨å…¨å±€æ–¹æ³•çš„ä½¿ç”¨ä¸­æˆ‘ä»¬å·²ç»åœ¨<code>main.ts</code>ä¸­ä½¿ç”¨äº†<code>use</code>æ–¹æ³•è¿›è¡Œäº†å…¨å±€æ³¨å†Œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦åœ¨App.vueä¸­è¿›è¡Œä½¿ç”¨å³å¯ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>HelloWorld msg<span class="token operator">=</span><span class="token string">&quot;Welcome to Your Vue.js + TypeScript App&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><p>æŸ¥çœ‹æµè§ˆå™¨å‘ç°å…¨å±€ç»„ä»¶å·²ç»æ³¨å†ŒæˆåŠŸ
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0275f977d804e2ab6c2217b61fe70a0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p> <p>æ•´ä½“æ¥çœ‹å…¶å®æ˜¯å’Œvue2å·®ä¸å¤šçš„ï¼Œä¸»è¦çš„åŒºåˆ«å°±æ˜¯ï¼š</p> <ul><li>vue2å…¨å±€æ–¹æ³•æ˜¯æŒ‚è½½åœ¨vueçš„åŸå‹å¯¹è±¡ä¸Šçš„ï¼Œvue3æŒ‚è½½åœ¨<code>app.config.globalProperties</code>æ–¹æ³•ä¸Š</li> <li>è°ƒç”¨çš„æ—¶å€™vue2å¯ä»¥ç›´æ¥ä½¿ç”¨this.xxxè¿›è¡Œè°ƒç”¨ï¼Œvue3éœ€è¦<code>getCurrentInstance()?.appContext.config.globalProperties</code>è¿›è¡Œè°ƒç”¨
åˆ°è¿™é‡Œä½¿ç”¨vue3å¼€å‘ä¸€ä¸ªæ’ä»¶åŸºæœ¬ç®—æ˜¯å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ªç»„ä»¶åº“å…¥å£åº”è¯¥å¦‚ä½•å¼€å‘ã€‚</li></ul> <h3 id="ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡"><a href="#ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡" class="header-anchor">#</a> ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡</h3> <p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç»„ä»¶åº“çš„æ—¶å€™ä¸€èˆ¬ä¼šæœ‰ä¸¤ç§å¼•å…¥æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯å…¨å±€å¼•å…¥ï¼Œä¸€ä¸ªæ˜¯æŒ‰éœ€åŠ è½½ã€‚æ‰€ä»¥åœ¨å¯¼å‡ºçš„æ—¶å€™åº”è¯¥æœ‰è¿™æ ·ä¸€ä¸ªindex.tsæ–‡ä»¶:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> componentA <span class="token keyword">from</span> <span class="token string">'./a'</span>
<span class="token keyword">const</span> componentList <span class="token operator">=</span> <span class="token punctuation">[</span>
    componentA
<span class="token punctuation">]</span>
<span class="token keyword">const</span> install <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¯¼å‡ºå•ä¸ª</span>
expoert <span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¯¼å‡ºæ‰€æœ‰</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    install
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>componentA</code>ä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ª<code>install</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å®ç°å‘¢ï¼ŸğŸ¤”ï¸
åœ¨åŸæœ‰çš„vue-cliä¸‹è½½ä¸‹æ¥çš„é¡¹ç›®è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œç›®å½•å¦‚ä¸‹ï¼š</p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7bcb74287ab492cb0a9a743a01b4437~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
ç°åœ¨ä¸»è¦å®ç°<code>components/TText/index.ts</code>å’Œ<code>index.ts</code>
components/TText/index.ts</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// éšä¾¿å†™ä¸€ä¸ªç»„ä»¶å°±è¡Œ</span>
<span class="token keyword">import</span> TText <span class="token keyword">from</span> <span class="token string">'./TText.vue'</span>

<span class="token comment">// åœ¨ç»„ä»¶ä¸Šæ·»åŠ installæ–¹æ³•ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨å•ä¸ªç»„ä»¶</span>
TText<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app<span class="token operator">:</span> App</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>TText<span class="token punctuation">.</span>name<span class="token punctuation">,</span> TText<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TText
</code></pre></div><p>index.ts</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> TText <span class="token keyword">from</span> <span class="token string">'./components/TText'</span>
<span class="token comment">// ç»„ä»¶åˆ—è¡¨</span>
<span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">[</span>
  TText
<span class="token punctuation">]</span> 
<span class="token comment">// ä½¿ç”¨æ‰€æœ‰ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app<span class="token operator">:</span> App</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    components<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">component</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>name<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
  TText<span class="token punctuation">,</span>
  install
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> install <span class="token punctuation">}</span>
</code></pre></div><p>åˆ°è¿™é‡Œæˆ‘ä»¬å°±å®Œæˆç»„ä»¶å…¥å£æ–‡ä»¶çš„å¼€å‘ï¼Œå…¶ä»–çš„åŸºæœ¬å°±æ˜¯æŒ‰ç…§è¿™ä¸ªæ¨¡å¼ç›´æ¥é€ è½®å­å°±å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨rollupæ¥æ‰“åŒ…æˆumdå’Œesmoduleæ ¼å¼çš„æ–‡ä»¶ã€‚</p> <h3 id="æ·»åŠ tollupé…ç½®å¹¶æ‰“åŒ…"><a href="#æ·»åŠ tollupé…ç½®å¹¶æ‰“åŒ…" class="header-anchor">#</a> æ·»åŠ tollupé…ç½®å¹¶æ‰“åŒ…</h3> <p>æ ¹ç›®å½•åˆ›å»º<code>build</code>æ–‡ä»¶å¤¹ï¼Œå¹¶ä¾æ­¤åˆ›å»º</p> <ol><li><code>rollup.config.js</code>ï¼šå…¬å…±åŸºç¡€é…ç½®</li> <li><code>rollup.esm.config.js</code>ï¼šæ‰“åŒ…esmoduleæ–‡ä»¶é…ç½®</li> <li><code>rollup.umd.config.js</code>æ‰“åŒ…umdæ–‡ä»¶é…ç½®
å› ä¸ºéƒ½æ˜¯é…ç½®å°±ç›´æ¥å†™äº†ï¼Œå¯ä»¥çœ‹åé¢çš„å¤‡æ³¨
rollup.config.js</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¤„ç†vueæ–‡ä»¶æ’ä»¶</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'rollup-plugin-vue'</span>
<span class="token comment">// å¤„ç†cssæ–‡ä»¶æ’ä»¶</span>
<span class="token keyword">import</span> css <span class="token keyword">from</span> <span class="token string">'rollup-plugin-css-only'</span>
<span class="token comment">// å¤„ç†tsæ’ä»¶</span>
<span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">'rollup-plugin-typescript2'</span>
<span class="token comment">// ç”¨äºåœ¨èŠ‚ç‚¹å•å…ƒæ¨¡å—ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> nodeResolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rollup/plugin-node-resolve'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../package.json'</span>
<span class="token comment">// è¾“å‡ºæ‰“åŒ…åçš„æ–‡ä»¶åç§°type 1.esm 2.umd</span>
<span class="token keyword">const</span> <span class="token function-variable function">file</span> <span class="token operator">=</span> <span class="token parameter">type</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dist/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> overrides <span class="token operator">=</span> <span class="token punctuation">{</span>
  compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span> declaration<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// ç”Ÿæˆ.d.tsçš„æ–‡ä»¶</span>
  exclude<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;tests/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tests/**/*.tsx&quot;</span><span class="token punctuation">]</span> 
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> file <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/index.ts'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
    file<span class="token operator">:</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'esm'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">nodeResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tsconfigOverride<span class="token operator">:</span> overrides <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span> output<span class="token operator">:</span> <span class="token string">'bundle.css'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// å¯è‡ªè¡Œä¿®æ”¹outputæ–‡ä»¶å</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  external<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'lodash-es'</span><span class="token punctuation">]</span> <span class="token comment">// è§„å®šå“ªäº›æ˜¯å¤–éƒ¨å¼•ç”¨çš„æ¨¡å—</span>
<span class="token punctuation">}</span>
</code></pre></div><p>rollup.esm.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> basicConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>file<span class="token punctuation">,</span> name<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./rollup.config'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>basicConfig<span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
    file<span class="token operator">:</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'esm'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>rollup.umd.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> basicConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> file <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./rollup.config'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>basicConfig<span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'thComponents'</span><span class="token punctuation">,</span>
    file<span class="token operator">:</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'umd'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// è®¾å®šå…¨å±€å˜é‡çš„åç§°</span>
      <span class="token string">'vue'</span><span class="token operator">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span>
      <span class="token string">'lodash-es'</span><span class="token operator">:</span> <span class="token string">'_'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    exports<span class="token operator">:</span> <span class="token string">'named'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¼–å†™æ‰“åŒ…è„šæœ¬</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run clean &amp;&amp; npm run build:esm &amp;&amp; npm run build:umd&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ•´ä½“æ‰“åŒ…æŒ‡ä»¤</span>
    <span class="token property">&quot;build:esm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config ./build/rollup.esm.config.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…esmodule</span>
    <span class="token property">&quot;build:umd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config ./build/rollup.umd.config.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…umdæ ¼å¼</span>
    <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf ./dist&quot;</span> <span class="token comment">// æ¸…é™¤dist</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>è¿è¡Œ <code>npm run build</code></p> <p>æŸ¥çœ‹ç»“æœ</p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7f7c316c14e422891149c739284321a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p> <p>ç»„ä»¶å·²ç»æ‰“åŒ…å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œåœ¨æœ¬åœ°ä½¿ç”¨ npm linkè¿›è¡Œæµ‹è¯•</p> <h3 id="å‘å¸ƒç»„ä»¶"><a href="#å‘å¸ƒç»„ä»¶" class="header-anchor">#</a> å‘å¸ƒç»„ä»¶</h3> <h4 id="ä½¿ç”¨npm-linkè¿›è¡Œç»„ä»¶åº“æµ‹è¯•"><a href="#ä½¿ç”¨npm-linkè¿›è¡Œç»„ä»¶åº“æµ‹è¯•" class="header-anchor">#</a> ä½¿ç”¨npm linkè¿›è¡Œç»„ä»¶åº“æµ‹è¯•</h4> <ol><li>é…ç½®package.json</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;th-bricks&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;linlei&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/th-bricks.umd.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/th-bricks.esm.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/index.d.ts&quot;</span>
    <span class="token operator">...</span>
 <span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š<code>npm link</code></li></ol> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd02720af9ae4139a540d92f756476be~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
3. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨</p> <ul><li>é…ç½®</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token string">&quot;th-bricks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>æ‰§è¡Œ <code>npm link th-bricks</code></li></ol> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7176bf42f5214c23bd9e7a2d68d5d76a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p> <ol start="5"><li>åœ¨é¡¹ç›®çš„main.tsä¸­å¼•å…¥ï¼Œå¹¶åœ¨App.vueä¸­ä½¿ç”¨
main.ts</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> thBricks <span class="token keyword">from</span> <span class="token string">'th-bricks'</span>
<span class="token keyword">import</span> <span class="token string">'th-bricks/dist/bundle.css'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>thBricks<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>App.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ä½¿ç”¨ <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>t<span class="token operator">-</span>text text<span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> tag<span class="token operator">=</span><span class="token string">&quot;h2&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">|</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ol start="6"><li>æŸ¥çœ‹ç»“æœ</li></ol> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31612dedaada43678dd8367b6d4d3bf8~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
å¯ä»¥çœ‹åˆ°å·²ç»æ¸²æŸ“å‡ºäº†ç»„ä»¶
<strong>å‘ï¼šå¦‚æœå‡ºç°å¯ä»¥æ‰“å°thBricksæ— æ³•ä½¿ç”¨çš„æƒ…å†µï¼Œå¯ä»¥é‡å¯ç”µè„‘è¯•è¯•ã€‚</strong></p> <h4 id="å‘å¸ƒnpm"><a href="#å‘å¸ƒnpm" class="header-anchor">#</a> å‘å¸ƒnpm</h4> <ol><li>é¦–å…ˆæŸ¥çœ‹æ˜¯å¦ç™»å½• <code>npm whami</code></li> <li>å¦‚æœå·²ç»ç™»å½•å°±ç›´æ¥è·³è¿‡ï¼Œå¦åˆ™ä½¿ç”¨<code>npm login</code>è¿›è¡Œç™»å½•ï¼Œæ²¡æœ‰npmè´¦å·çš„å°±éœ€è¦æ³¨å†Œä¸€ä¸ªäº†</li> <li>å‘å¸ƒ<code>npm publish</code></li></ol> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b13ef20367b4220b066b2877ed023cb~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71e3efc3aa7940b8aee98f404141ad6c~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
å¯ä»¥çœ‹åˆ°å·²ç»å‘å¸ƒæˆåŠŸäº†ã€‚</p> <p>ğŸ¤”æˆ‘ä»¬æ¯æ¬¡æ‰§è¡Œ<code>npm publish</code>çš„æ—¶å€™å¹¶ä¸èƒ½ä¿è¯æˆ‘ä»¬ä¸€å®šæ‰§è¡Œäº†<code>npm run build</code>ï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å¤„ç†å‘¢ï¼Ÿ
ç»è¿‡æŸ¥çœ‹å„ç§èµ„æ–™å‘ç°äº†å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cf7a56bbd3c488a94fb08d1af3387b3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run clean &amp;&amp; npm run build:esm &amp;&amp; npm run build:umd&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build:esm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config ./build/rollup.esm.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build:umd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config ./build/rollup.umd.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf ./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;prepublishOnly&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run build&quot;</span> <span class="token comment">// npm publishçš„æ—¶å€™å…ˆæ‰§è¡Œnpm run build</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="header-anchor">#</a> å†™åœ¨æœ€å</h3> <ul><li>åŸºæœ¬çš„ç»„ä»¶åº“çš„æµç¨‹åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯ç¦»çœŸæ­£çš„ä¸€ä¸ªå®Œå–„ç»„ä»¶åº“è¿˜æœ‰å¾ˆè¿œçš„è·ç¦»ï¼Œéœ€è¦ä¸æ–­çš„ä¸°å¯Œç»„ä»¶åº“ï¼Œä¾‹å¦‚ï¼štreeï¼Œtableï¼Œmessageï¼Œè¿˜æœ‰å„ç§é¡¹ç›®ç‰¹å®šçš„ç»„ä»¶ç­‰ç­‰</li> <li><a href="https://github.com/linlei0/th-component.git/" target="_blank" rel="noopener noreferrer">ç»„ä»¶åº“ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//edit/master/docs/note/vue/vue3+rollupå®ç°ä¸ªäººç»„ä»¶åº“.md" target="_blank" rel="noopener noreferrer">åœ¨ Github ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">11/26/2021, 9:25:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/note/note/vue/vue2è¿›é˜¶.html" class="prev">
        vue2 è¿›é˜¶
      </a></span> <span class="next"><a href="/note/note/vue/vue3å®ç°ä¸€ä¸ªtoastç»„ä»¶.html">
        vue3å®ç°toast
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.39547da1.js" defer></script><script src="/note/assets/js/2.c3539c26.js" defer></script><script src="/note/assets/js/37.10ec91da.js" defer></script>
  </body>
</html>
